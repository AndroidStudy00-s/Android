## ğŸ“Œ MVVM (Model - View - ViewModel)

- MVVM ë””ìì¸ íŒ¨í„´ì€ í•˜ë‚˜ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ Model, View, ViewModelë¡œ ì´ë£¨ì–´ì§„ ë””ìì¸ íŒ¨í„´
- Viewì™€ Model ì‚¬ì´ì˜ ì˜ì¡´ì„±ì„ ViewModelì´ í•´ê²°í•´ì¤Œ
- ViewëŠ” ViewModelì´ ê°€ì§€ê³  ìˆëŠ” ë°ì´í„°ë¥¼ í•„ìš”ë¡œ í•˜ê¸° ë•Œë¬¸ì— ViewModelì´ ê°€ì§„ ë°ì´í„°ë¥¼ ê´€ì°°(Observing)í•¨
    - Viewê°€ DBì— ì§ì ‘ ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ UI ì—…ë°ì´íŠ¸ì—ë§Œ ì§‘ì¤‘í•˜ê³ , ViewModelì„ ê´€ì°°í•˜ê³  ìˆëŠ” ë§Œí¼ ë°ì´í„° ë³€í™”ì— ë”ìš± ëŠ¥ë™ì 
    - LiveData(Observable íŒ¨í„´)ì„ ì´ìš©í•´ DBë¥¼ ê´€ì°°í•˜ê³  ìë™ìœ¼ë¡œ UIë¥¼ ê°±ì‹ í•¨
    â‡’ ì§ì ‘ ë·°ë¥¼ ë°”ê¿”ì£¼ëŠ” ë²ˆê±°ë¡œì›€ì„ ì—†ì• ê³  ë°ì´í„° ë¶ˆì¼ì¹˜í•  í™•ë¥ ì´ ì¤„ì–´ë“¬

![Untitled (4)](https://user-images.githubusercontent.com/69586104/236594868-bbae8918-e414-4493-bcba-fde7aadf11b8.png)

<br>
<br>

### Model

- ì•±ì—ì„œ ì‚¬ìš©í•  ë°ì´í„°ì— ê´€ë ¨ëœ í–‰ìœ„ì™€ ë°ì´í„°

<br>

### View

- UIì— ê´€ë ¨ëœ ê²ƒ
- ì‚¬ìš©ìì˜ actionì„ ë°›ìŒ (í…ìŠ¤íŠ¸ ì…ë ¥, ë²„íŠ¼ í„°ì¹˜ ë“±)
- ViewModelì˜ ë°ì´í„°ë¥¼ ê´€ì°°í•´(Observe) UI ê°±ì‹ 
- ë°ì´í„°ì˜ ë³€í™”ë¥¼ ì•Œì•„ì°¨ë¦¬ê³  ìë™ìœ¼ë¡œ í™”ë©´ ê°±ì‹  ê°€ëŠ¥

<br>

### ViewModel

- Viewê°€ ìš”ì²­í•œ ë°ì´í„°ë¥¼ Modelë¡œ ìš”ì²­
- Modelë¡œë¶€í„° ìš”ì²­í•œ ë°ì´í„° ë°›ìŒ
- Viewê°€ ì‚¬ìš©í•  ë©”ì„œë“œì™€ í•„ë“œë¥¼ êµ¬í˜„í•˜ê³ , Viewì—ê²Œ ìƒíƒœë³€í™”ë¥¼ ì•Œë¦¼

<br>

### ë™ì‘ ë°©ì‹

> 1. ì‚¬ìš©ìì˜ ìš”ì²­ì´ Viewì— ë“¤ì–´ì˜´
2, ViewëŠ” Command íŒ¨í„´ìœ¼ë¡œ ViewModelì— Action ì „ë‹¬
3. ViewModelì€ Modelì—ê²Œ ë°ì´í„° ìš”ì²­
4. Modelì€ ViewModelì—ì„œ ìš”ì²­ë°›ì€ ë°ì´í„°ë¥¼ ì‘ë‹µ
5. ViewModelì€ ì‘ë‹µë°›ì€ ë°ì´í„°ë¥¼ ê°€ê³µí•˜ì—¬ ì €ì¥
6. ViewëŠ” ViewModelê³¼ DataBindingí•˜ì—¬ í™”ë©´ì„ ë‚˜íƒ€ëƒ„
> 

<br>
<br>

### íŠ¹ì§•

- CommandíŒ¨í„´ê³¼ DataBinding ì‚¬ìš©í•¨ â†’ Viewì™€ ViewModel ì‚¬ì´ì˜ ì˜ì¡´ì„± ì—†ì•°
    - [Command íŒ¨í„´](https://victorydntmd.tistory.com/295) : ê°ì²´ì˜ í–‰ìœ„ (ë©”ì†Œë“œ)ë¥¼ í´ë˜ìŠ¤ë¡œ ë§Œë“¤ì–´ `ìº¡ìŠí™”`í•˜ëŠ” íŒ¨í„´
- ViewModelê³¼ ViewëŠ” 1:n ê´€ê³„

<br>
<br>

### ì¥ì 

- Viewì™€ Modelì˜ ì˜ì¡´ì„±ì´ ì—†ìŒ
- Command íŒ¨í„´ê³¼ DataBindingì„ ì‚¬ìš©í•˜ì—¬ Viewì™€ ViewModelê°„ì˜ ì˜ì¡´ì„± ë˜í•œ ì—†ì•°

â‡’ ê° ë¶€ë¶„ì´ ë…ë¦½ì ì´ë¯€ë¡œ ëª¨ë“ˆí™”í•˜ì—¬ ê°œë°œ ê°€ëŠ¥ â†’ ìœ ë‹› í…ŒìŠ¤íŠ¸ê°€ ìš©ì´í•˜ë‹¤

- ê°œë°œ ê¸°ê°„ ë™ì•ˆ ê°œë°œìì™€ ë””ìì´ë„ˆê°€ ë™ì‹œì— ë…ë¦½ì ìœ¼ë¡œ(ë³‘ë ¬ì ìœ¼ë¡œ) ì‘ì—…í•  ìˆ˜ ìˆìŒ

â‡’ UI ë””ìì¸ì´ ë‚˜ì˜¤ì§€ ì•Šì•˜ë”ë¼ë„ ë¯¸ë¦¬ ì •ì˜ëœ ëª¨ë¸ê³¼ ë·° ëª¨ë¸ì„ ë¨¼ì € ê°œë°œí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë³‘ë ¬ì ì¸ ì—…ë¬´ í”„ë¡œì„¸ìŠ¤ê°€ ê°€ëŠ¥

<br>
<br>

### ë‹¨ì 

- ViewModelì˜ ì„¤ê³„ê°€ ì–´ë ¤ì›€
- ì†Œí˜• ì•±ì—ì„œ ì‚¬ìš©í•˜ë©´ ì˜¤ë²„í—¤ë“œê°€ ì»¤ì§
- ì•±ì´ ë„ˆë¬´ ê±°ëŒ€í•´ì§€ë©´ ì•±ì˜ ë©”ëª¨ë¦¬ ì†Œëª¨ê°€ ë°ì´í„° ë°”ì¸ë”© ë•Œë¬¸ì— ì»¤ì§

<br>
<br>

### ğŸ™‹â€â™€ï¸ MVVM ViewModel vs AAC ViewModel

**êµ¬ê¸€ì—ì„œëŠ” MVVM íŒ¨í„´ì„ ê°„í¸í•˜ê²Œ ì ìš©í•  ìˆ˜ ìˆë„ë¡ [AAC](https://developer.android.com/jetpack/guide?hl=ko)ë¥¼ ì œê³µí•¨**

-![Untitled (5)](https://user-images.githubusercontent.com/69586104/236594901-53c98a8f-6dd2-4cad-be91-c1cd1bafc893.png)

AAC ViewModelì„ ì‚¬ìš©í•˜ë©´ ì•¡í‹°ë¹„í‹°ê°€ ì¬ìƒì„±ë˜ëŠ” (ex) í™”ë©´ íšŒì „) ìƒí™©ì—ì„œë„ viewModel ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìœ ì§€í•¨ìœ¼ë¡œì¨ ë°ì´í„°ë¥¼ ì•ˆì „í•˜ê²Œ ë‹¤ë£° ìˆ˜ ìˆìŒ

**ì¦‰, Activityì˜ ìƒëª…ì£¼ê¸° ë•Œë¬¸ì— ë°ì´í„° ê´€ë¦¬ ì¸¡ë©´ì—ì„œ ê²ªì—ˆë˜ ì–´ë ¤ì›€ì€ ê°„ë‹¨í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŒ**

ë˜í•œ, AACì˜ ViewModelë¡œ MVVM íŒ¨í„´ì˜ ViewModelì„ êµ¬í˜„í•  ìˆ˜ ìˆìŒ

> MVVM ViewModelì€Â **Viewì— í•„ìš”í•œ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ì—¬ ë°”ì¸ë”© í•´ì£¼ê³ , ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ë‹¹í•´ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ìš”ì†Œ**, AACì˜ ViewModelì€Â **Androidì˜ ìˆ˜ëª… ì£¼ê¸°ë¥¼ ê³ ë ¤í•˜ì—¬ UI ê´€ë ¨ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ëŠ” ìš”ì†Œ**
> 

<br>
<br>

### **ğŸ¤”Â ë‚´ ìƒê°Â ğŸ¤”**

[https://github.com/team-MUMENT/MUMENT-AOS/pull/135](https://github.com/team-MUMENT/MUMENT-AOS/pull/135)

ì˜ˆì—ì „ì— PRì„ ë‚ ë ¸ì„ ë•Œê°€ ë‹¤ì‹œ ê¸°ì–µì´ ë‚˜ì„œ ë‹¤ì‹œ ì‚´í´ë´¤ëŠ”ë° radio buttonì„ ë‹¤ selectë¡œ í•˜ë‚˜í•˜ë‚˜ êµ¬í˜„í–ˆë‹¤ê°€ ë°›ì€ í”¼ë“œë°±ì…ë‹ˆë‹¤!
![Untitled (6)](https://user-images.githubusercontent.com/69586104/236594982-28d3efb6-09b9-4a43-9e07-547dcc8e36d3.png)


+) ìµœê·¼ì— ë°°ë¯¼ë‹¤ë‹ˆëŠ” ë¶„ì´ë‘ ì´ì•¼ê¸°ë¥¼ í–ˆëŠ”ë°, MVP íŒ¨í„´ê³¼ MVVMì„ ì„ì–´ì„œ ì“´ë‹¤ê³  í•˜ë”ë¼êµ¬ìš”?

MVP íŒ¨í„´ì˜ ê²½ìš° ë¡œì§ì„ í”„ë¦¬ì  í„°ë§Œ ë³´ë©´ ëª¨ë‘ ì´í•´ê°€ëŠ¥í•˜ì§€ë§Œ MVVMì˜ ê²½ìš° ì˜µì € íŒ¨í„´ì„ ì‚¬ìš©í•˜ë‹ˆ íƒ€ê³ íƒ€ê³  ë“¤ì–´ê°€ì„œ ë´ì•¼í•˜ëŠ” ê²Œ ë§ìœ¼ë¯€ë¡œ ë³„ë¡œ ì„ í˜¸í•˜ì§€ ì•ŠëŠ” ë¶„ë“¤ë„ ìˆë‹¤ê³  ë“¤ì—ˆìŠµë‹ˆë‹¤.

> ì˜µì €ë²„ íŒ¨í„´ : ì–´ë–¤ ê°ì²´ì˜ ìƒíƒœê°€ ë³€í•  ë•Œ ê·¸ì™€ ì—°ê´€ëœ ê°ì²´ë“¤ì—ê²Œ ì•Œë¦¼ì„ ë³´ë‚´ëŠ” ë””ìì¸ íŒ¨í„´

<br>
<br>

### ğŸ‘©â€ğŸ’» ì˜ˆì œ ì½”ë“œ

### Model

- ì—…ë¬´ ë¡œì§ì„ ìˆ˜í–‰í•˜ê³  ê²°ê³¼ì— ëŒ€í•œ ë°ì´í„° í‘œí˜„

```kotlin
class MainModel(val context: Context) {

    fun getListDatas(): ArrayList<String> {
        val datas: ArrayList<String> = ArrayList<String>()
        //dbms
        val helper=DBHelper(context)
        val db=helper.readableDatabase
        val cursor = db.rawQuery("select * from tb_test", null)
        while(cursor.moveToNext()){
            datas.add(cursor.getString(1))
        }
        db.close()
        return datas
    }

    fun addItem(item: String){
        val helper=DBHelper(context)
        val db=helper.writableDatabase
        db.execSQL("insert into tb_test (todo) values (?)", arrayOf(item))
        db.close()
    }
}

```

### View

- í™”ë©´ í‘œì‹œê°€ ì£¼ ëª©ì 
- Activity, FrameWork ì—­í• 

```kotlin
class MVVMMainActivity : AppCompatActivity(), View.OnClickListener {
    val viewModel: MainViewModel= MainViewModel(this)

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        button.setOnClickListener(this)
        viewModel.onCreate()
    }

    override fun onClick(v: View?) {
        val data: String = editView.text.toString()
        editView.setText("")
        viewModel.onClick(data)
    }
}
```

### ViewModel

- Modelê³¼ Viewë¥¼ ë¶„ë¦¬ ì‹œí‚¤ëŠ”ê²Œ ëª©ì 
- View ê°€ í•„ìš”í•œ Dataì™€ Command ì œê³µ
- Model ê²°ê³¼ì— ì˜í•œ ë°ì´í„° ë°”ì¸ë”©ì´ ì§ì ‘ ë  ìˆ˜ ìˆë‹¤.

```kotlin
class MainViewModel(val activity: Activity){
    lateinit var datas: ArrayList<String>
    lateinit var adapter: ArrayAdapter<String>
    val model=MainModel(activity)

    fun onCreate(){
        datas=model.getListDatas()
        adapter= ArrayAdapter(activity, R.layout.simple_list_item_1, datas)
        activity.listView.adapter = adapter
    }

    fun onClick(data: String){
        model.addItem(data)
        datas.add(data)
        adapter.notifyDataSetChanged()
    }
}
```

<br>
<br>

### 1ï¸âƒ£ 1ë¶„ ë‹µë³€

<br>
<aside>

MVVMì´ë€ Model, View, ViewModelë¡œ ë¶„ë¦¬ë˜ì–´ìˆìœ¼ë©° Mì€ ì•±ì— ì‚¬ìš©ë  ë°ì´í„°, VëŠ” ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì£¼ëŠ” í™”ë©´, VMì€ Viewê°€ ì‚¬ìš©í•  ë©”ì„œë“œì™€ í•„ë“œë¥¼ êµ¬í˜„í•˜ê³  Viewì—ê²Œ ìƒíƒœë³€í™”ë¥¼ ì•Œë¦¬ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
ì‚¬ìš©ìì˜ ìš”ì²­ì´ Viewì— ë“¤ì–´ì˜¤ë©´ ViewëŠ” ViewModelì—ê²Œ ìš”ì²­ì„ ì „ë‹¬í•˜ê³ , ViewModelì€ Modelì—ê²Œ ë°ì´í„°ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤. Modelì€ ViewModelì—ì„œ ìš”ì²­ë°›ì€ ë°ì´í„°ë¥¼ ì‘ë‹µí•˜ë©° ViewModelì€ ì‘ë‹µë°›ì€ ë°ì´í„°ë¥¼ ê°€ê³µí•˜ì—¬ ì €ì¥í•©ë‹ˆë‹¤. ViewëŠ” ViewModelê³¼ DataBindingì„ í•˜ì—¬ í™”ë©´ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
Viewì™€ Modelì˜ ì˜ì¡´ì„±ì´ ì—†ë‹¤ëŠ” ì¥ì ê³¼ ê° ë¶€ë¶„ì´ ë…ë¦½ì ì´ë¯€ë¡œ ëª¨ë“ˆí™”í•˜ì—¬ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ ì†Œí˜• ì•±ì—ì„œ ì‚¬ìš©í•˜ë©´ ì˜¤ë²„í—¤ë“œê°€ ì»¤ì§„ë‹¤ëŠ” ë‹¨ì ë„ ìˆìŠµë‹ˆë‹¤.

</aside>

<br>
<br>
ì¶œì²˜:

- [https://taeyeonkim93.github.io/2019/12/02/Programming-kotlin-2019-12-02-android-framework-pattern/](https://haruple.tistory.com/212)
- [https://beomy.tistory.com/43](https://beomy.tistory.com/43)
- [https://haruple.tistory.com/212](https://haruple.tistory.com/212)
- [https://www.owl-dev.me/blog/38](https://www.owl-dev.me/blog/38)
- [https://leveloper.tistory.com/216](https://leveloper.tistory.com/216)