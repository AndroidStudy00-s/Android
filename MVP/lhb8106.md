
## ğŸ“Œ MVP (Model - View - Presenter)

mvp ë””ìì¸ íŒ¨í„´ì€ í•˜ë‚˜ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ Model, View, Presenterë¡œ ì´ë£¨ì–´ì§„ ë””ìì¸ íŒ¨í„´. 

MVPëŠ” MVCì™€ ë‹¤ë¥´ê²Œ UI(View)ì™€ ë¡œì§(Model)ì„ ë¶„ë¦¬í•˜ê³ , ì„œë¡œ ê°„ì— ìƒí˜¸ì‘ìš©ì„ ë‹¤ë¥¸ ê°ì²´(Presenter)ì— ê·¸ ì—­í• ì„ ì¤Œìœ¼ë¡œì¨ ì„œë¡œì˜ ì˜í–¥(ì˜ì¡´ì„±)ì„ ìµœì†Œí™” í•¨


![Untitled (3)](https://user-images.githubusercontent.com/69586104/236096818-ac44d9b7-df4c-4ad8-bba9-6f33e2318dd5.png)

<br>

### Model

- í”„ë¡œê·¸ë¨ ë‚´ë¶€ì ìœ¼ë¡œ ì“°ì´ëŠ” ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³ , ì²˜ë¦¬í•˜ëŠ” ì—­í•  (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
- View ë˜ëŠ” Presenter ë“± ë‹¤ë¥¸ ì–´ë–¤ ìš”ì†Œì—ë„ ì˜ì¡´ì ì´ì§€ ì•Šì€ ë…ë¦½ì ì¸ ì˜ì—­

<br>

### View

- ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì£¼ëŠ” ë³´ì´ëŠ” í™”ë©´(xml)
- Modelì—ì„œ ì²˜ë¦¬ëœ ë°ì´í„°ë¥¼ Presenterë¥¼ í†µí•´ ë°›ì•„ì„œ ìœ ì €ì—ê²Œ ë³´ì—¬ì¤Œ
- ìœ ì €ì˜ action ë° ì•¡í‹°ë¹„í‹° ë¼ì´í”„ì‚¬ì´í´ ìƒíƒœ ë³€ê²½ì„ ì£¼ì‹œí•˜ë©° presenterì— ë³´ë‚´ëŠ” ì—­í• 
- Presenterë¥¼ ì‚¬ìš©í•´ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ê¸° ë•Œë¬¸ì— Presenterì— ë§¤ìš° ì˜ì¡´ì 

<br>

### Presenter

- Modelê³¼ Viewì˜ ë§¤ê°œì²´
- ëª¨ë¸ê³¼ ë·°ì˜ ë§¤ê°œì²´ë¼ëŠ” ì ì—ì„œ Controllerì™€ ìœ ì‚¬í•˜ì§€ë§Œ, Viewì— ì§ì ‘ ì—°ê²°ë˜ëŠ” ëŒ€ì‹  ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ìƒí˜¸ì‘ìš©
- ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ìƒí˜¸ì‘ìš©í•˜ë¯€ë¡œ MVCê°€ ê°€ì§„ í…ŒìŠ¤íŠ¸ì™€ í•¨ê»˜ ëª¨ë“ˆí™”/ìœ ì—°ì„± ë¬¸ì œ í•´ê²° ê°€ëŠ¥
- ë·°ì—ê²Œ í‘œì‹œí•  ë‚´ìš©(Data)ë§Œ ì „ë‹¬í•˜ë©° ì–´ë–»ê²Œ ë³´ì—¬ì¤„ì§€ëŠ” Viewê°€ ë‹´

<br>

### ë™ì‘ ë°©ì‹

> 1. ì‚¬ìš©ìì˜ ìš”ì²­ì´ Viewì— ë“¤ì–´ì˜´
2, ViewëŠ” ë°ì´í„°ë¥¼ Presenterì— ìš”ì²­
3. PresenterëŠ” Modelì—ê²Œ ë°ì´í„° ìš”ì²­
4. Modelì€ Presenterì—ì„œ ìš”ì²­ë°›ì€ ë°ì´í„°ë¥¼ ì‘ë‹µ
5. PresenterëŠ” Viewì—ê²Œ ë°ì´í„°ë¥¼ ì‘ë‹µ
6. ViewëŠ” Presenterê°€ ì‘ë‹µí•œ ë°ì´í„°ë¥¼ ì´ìš©í•˜ì—¬ í™”ë©´ì„ ë‚˜íƒ€ëƒ„
> 

<br>

### íŠ¹ì§•

- Presenterì€ Viewì™€ Modelì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ì§€ê³ ìˆì–´ ë‘˜ì„ ì—°ê²°í•˜ëŠ” ì—­í• ì„ í•¨
- Presenterì™€ ViewëŠ” 1:1 ê´€ê³„ì„

<br>

### ì¥ì 

- Viewì™€ Modelì˜ ì˜ì¡´ì„±ì´ ì—†ìŒ (MVCíŒ¨í„´ì˜ ë‹¨ì  ë³´ì™„)

<br>

### ë‹¨ì 

- ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì»¤ì§ˆìˆ˜ë¡ Viewì™€ Presenterì‚¬ì´ì˜ ì˜ì¡´ì„±ì´ ë†’ìŒ

<br>
<br>

### **ğŸ¤”Â ë‚´ ìƒê°Â ğŸ¤”**

Modelì€ MVCì˜ Modelê³¼ ê°™ê³  (data class, service ë“± ì„ ì–¸), ViewëŠ” Activity, presenterì€ Controllerë¥¼ ì—­í• í•˜ëŠ” ê±° ê°™ë‹¤!

ì–´ì°Œë³´ë©´ MVPê°€ ì•ˆë“œë¡œì´ë“œì—ì„œëŠ” MVCì™€ ë¹„ìŠ·í•œ ì—­í• ì„ í•˜ëŠ”ê²Œ ì•„ë‹ê¹Œ? 

<br>

### ğŸ‘©â€ğŸ’» ì˜ˆì œ ì½”ë“œ

### interface

- model, view, presenterì—ì„œ ì‚¬ìš©í•  functionë“¤ interfaceí˜•íƒœë¡œ ì •ì˜

```kotlin
interface IMainPresenter {
    fun getListView(): ArrayList<String>
    fun addItem(item: String)

    interface IView {
        fun updateListView(item: String)
    }
}
```

> í•´ë‹¹ ì½”ë“œì—ì„œëŠ” interfaceì—ì„œ modelì— ì‚¬ìš©ë  í•¨ìˆ˜ë„ ë¯¸ë¦¬ ì •ì˜í–ˆì§€ ë§Œ, modelì— ê´€ë ¨ëœ í•¨ìˆ˜ëŠ” ì—†ì–´ë„ ê´œì°®ì§€ì•Šì„ê¹Œ? 
ê·¸ë˜ì„œ í´ë”ë§ì„ í•  ë•Œ modelê³¼ presenterë¥¼ ì™„ì „íˆ ë¶„ë¦¬í•˜ì—¬ presenterì— ì´ë¥¼ interfaceë¥¼ ì„ ì–¸í•˜ê³ , êµ¬í˜„ì²´ë¥¼ ë„£ì–´ë„ ë  ê±° ê°™ë‹¤. 
ì„¤ê³„ì— ë”°ë¼ ë‹¤ë¥´ê² ì§€ë§Œ í•¨ìˆ˜ë“¤ì´ ë§ì•„ì§€ë©´ ë”°ë¡œ ë„£ì–´ë‘ëŠ”ê²Œ ê´€ë¦¬ê°€ í¸í•  ê±° ê°™ë‹¤ëŠ”..~ ë‚˜ì˜ ìƒê°

<br>

### Model

```kotlin
class MainModel(val context: Context) {

    fun getListDatas(): ArrayList<String> {
        val datas: ArrayList<String> = ArrayList<String>()
        //dbms
        val helper=DBHelper(context)
        val db=helper.readableDatabase
        val cursor = db.rawQuery("select * from tb_test", null)
        while(cursor.moveToNext()){
            datas.add(cursor.getString(1))
        }
        db.close()
        return datas
    }

    fun addItem(item: String){
        val helper=DBHelper(context)
        val db=helper.writableDatabase
        db.execSQL("insert into tb_test (todo) values (?)", arrayOf(item))
        db.close()
    }
}

```

### View

```kotlin
class MVPMainActivity : AppCompatActivity(), View.OnClickListener, IMainPresenter.IView{
    val presenter: MainPresenter = MainPresenter(this)
    lateinit var datas: ArrayList<String>
    lateinit var adapter: ArrayAdapter<String>

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        button.setOnClickListener(this)
        presenter.view=this
        datas=presenter.getListView()
        adapter= ArrayAdapter(this, android.R.layout.simple_list_item_1, datas)
        listView.adapter = adapter
    }

    override fun onClick(v: View?) {
        val data: String = editView.text.toString()
        presenter.addItem(data)
    }

    override fun updateListView(item: String) {
        datas.add(item)
        adapter.notifyDataSetChanged()
    }
}

```

### Presenter

```kotlin
class MainPresenter(val context: Context): IMainPresenter {
    var model: MainModel= MainModel(context)
    lateinit var view: IMainPresenter.IView

    override fun getListView(): ArrayList<String> {
        return model.getListDatas()
    }

    override fun addItem(item: String) {
        model.addItem(item)
        view.updateListView(item)
    }
}

```

<br>
<br>

### 1ï¸âƒ£ 1ë¶„ ë‹µë³€

<br>
<aside>

MVPë€ Model, View, Presenterë¡œ ë¶„ë¦¬ë˜ì–´ìˆìœ¼ë©° Mì€ viewì— í‘œì‹œë˜ê¸° ìœ„í•´ í•„ìš”í•œ ë°ì´í„°, VëŠ” ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì£¼ëŠ” í™”ë©´, PëŠ” viewì™€ modelì‚¬ì´ì˜ ë§¤ê°œì²´ ì—­í• ì„ í•©ë‹ˆë‹¤.
ì‚¬ìš©ìì˜ ìš”ì²­ì´ Viewì— ë“¤ì–´ì˜¤ë©´ ViewëŠ” ë°ì´í„°ë¥¼ Presenterì— ìš”ì²­í•˜ë©°, PresenterëŠ” Modelì—ê²Œ ë°ì´í„°ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤. Modelì€ Presenterì—ì„œ ìš”ì²­ë°›ì€ ë°ì´í„°ë¥¼ ì‘ë‹µí•˜ë©° Presenterì€ Viewì—ê²Œ ë°ì´í„°ë¥¼ ì‘ë‹µí•©ë‹ˆë‹¤. ViewëŠ” Presenterê°€ ì‘ë‹µí•œ ë°ì´í„°ë¥¼ ì´ìš©í•˜ì—¬ í™”ë©´ì„ ë‚˜íƒ€ë‚´ëŠ” ë°©ì‹ìœ¼ë¡œ ì‘ë™ë©ë‹ˆë‹¤.
Viewì™€ Modelì˜ ì˜ì¡´ì„±ì´ ì—†ë‹¤ëŠ” ì¥ì ì´ ìˆì§€ë§Œ, Presenterì™€ Viewì‚¬ì´ì˜ ì˜ì¡´ì„±ì´ ë†’ì€ ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤.

</aside>

ì¶œì²˜:

- [https://taeyeonkim93.github.io/2019/12/02/Programming-kotlin-2019-12-02-android-framework-pattern/](https://taeyeonkim93.github.io/2019/12/02/Programming-kotlin-2019-12-02-android-framework-pattern/)
- [https://beomy.tistory.com/43](https://beomy.tistory.com/43)